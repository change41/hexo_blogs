---
title: RH134 第二章 通过GREP使用正则表达式
url: 323.html
id: 323
categories:
  - RHEL134
date: 2018-05-06 14:15:16
tags:
---

###### 行定位符：行首 ^ 行尾 $  

^cat 匹配cat 开头的行

dog$ 匹配dog 结尾的行

^cat$    匹配只有cat的行

另一种定位符是字边界。\\<和\\\> 可分别用于匹配一个字词的开头和结尾

###### 通配符和倍数  

正则表达式使用 “.”作为无限制通配符。 正则表达式 c.t 将会依次查找包含 c、任一字符和 t 的数据。比如：cat ,cot ,c5t ,cQt 等等。

有限制通配\[ \] ,如c\[aou\]t ，匹配出来的的结果只能包括cat ,cot ,cut 。

倍数与通配符一起使用可以匹配多个字符。“\*”在证据表达式中修饰它前一位字符，从表示该字符的数量可为0至无限大。如果使用正则表达式c.\*t 将会匹配 cat ,cot,coat,culvert 等以c开头t结尾的，中间包含任意多个字符的数据。

另一种倍数将会指示模式中前面字符的期望个数。c.\\{2\\}t是使用显式倍数的一个示例。此正则表达式将会匹配以 c 开头，以 t 结尾且中间包含两个任意两个字符的数据。

在不同的脚本语言中，正则表达式的语法会存在些许差异。

###### 使用grep

grep是用作部分分发的一个命令，其使用正则表达式来隔离匹配的数据。

grep 'cat$' /usr/share/dict/words

注意：由于正则表达式常含有shell 元字符（如$、* 等），建议练习的时候使用单引号（‘’）来括起命令行上的正则表达式。

ps aux | grep '^student'    #通过使用 | ，grep 可以与其它命令一起使用。

|选项  |功能
| :--
|-i|使用所提供的正则表达式；但是不会强制区分大小写（运行不区分大小写的操作）。
|-v|仅显示不包含正则表达式匹配项的行。
|-r|将递归匹配正则表达式的数据搜素应用到一组文件或目录中。
|-A <NUMBER>|显示正则表达式匹配项之后的行数
|-B <NUMBER>|显示正则表达式匹配项之后的行数
|-e|如果使用多个-e选项，则提供多个正则表达式，并将与逻辑or一起使用
```sh
grep -i 'cat' file    #不区分大小写
grep -i -v 'cat' file    #不显示带有cat（大小写）的内容
grep -v '^\[#;\]' file    #不显示以#或者；开头的行
grep -e 'cat' -e 'dog' file     #显示包含cat 或者dog的行
grep '^Aug *8 1\[345\]' door.log     #查找8月8日，13点-15点分发生的事
grep '^Aug \*8 14.\*OPEN' door.log     #找8月8日14点的包含OPEN的信息
grep '^Aug *8 14:\[345\]' wall.log 27  #查找8月8日，14点30-50分发生的事
grep '^Aug \*8 14.\*ALERT' wall.log 28  #查找8月8日14点的包含ALERT的信息
grep '^Aug *8 14:40' proxy.log     #查找8月8日 14:40分发生的事
grep -A 24 '14:40' proxy.log    #查找匹配之后的24行
```
